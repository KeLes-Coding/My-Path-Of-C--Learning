# 第1章 UNIX基础知识

## 1.1 引言

## 1.2 UNIX体系结构

从严格意义上说，可将操作系统定义为一种*软件*，它控制计算机硬件资源，提供程序运行环境。
我们通常将这种软件称为<u>内核（kernel）</u>，因为它相对较小，而且位于环境的核心。

## 1.3 登录

### 1.3.1 登录名

系统在其口令文件（通常是/etc/passwd文件）中查看登录名。

口令文件中的登录项由7个以冒号分隔的字段组成，依次是：
> 登录名
> 
> 加密口令
> 
> 数字用户ID（205）
> 
> 数字组ID（105）
>
> 注释字段
> 
> 起始目录（/home/sar）
>
> shell程序（/bin/ksh）
> 
    ```
    sar:x:205:105:Stephen Rago:/home/sar:/bin/ksh
    ```

### 1.3.2 shell

* shell 是一个命令行解释器，它读取用户输入，然后执行命令。
* shell 的用户输入通常来自于终端（交互式shell），有时则来自于文件（称为shell脚本）

## 1.4 文件和目录

### 1.4.1 文件系统

* UNIX文件系统是目录和文件的一种层次结构，所有东西的起点是称为根（root）的目录，这个目录的名称是一个字符 **“/”**。

* 目录（directory）是一个包含目录项的文件。

### 1.4.2 文件名

* 目录中的各个名字称为文件名（filename）。
* 只有斜线（/）和空字符这两个字符不能出现在文件名中。
    > 斜线用来分隔构成路径名的各文件名
    > 空字符则用来终止一个路径名。

### 1.4.3 路径

### 1.4.4 工作目录

* 每个进程都有一个工作目录（working directory），有时称其为当前工作目录（current working directory）。
* 所有相对路径名都从工作目录开始解释。进程可以用chdir函数更改其工作目录。
    > 例如，相对路径名doc/memo/joe指的是当前工作目录中的doc目录中 的memo目录中的文件（或目录）joe。
    > 从该路径名可以看出，doc和memo都应当是目录，但是却<u>不能分辨joe是文件还是目录。</u>
    >
    > 路径名/urs/lib/lint是一个绝对路径名，它指的是根目录中的usr目录中的lib目录中的文件（或目录）lint。

### 1.4.5 起始目录

## 1.5 输入和输出

### 1.5.1 文件描述符

文件描述符（file descriptor）通常是一个小的非负整数，内核用以标识一个特定进程正在访问的文件。

### 1.5.2 标准输入、标准输出和标准错误

    每当运行一个新程序时，所有的 shell 都为其打开 3 个文件描述符，即：
    1. 标准输入（standard input）
    2. 标准输出（standard output）
    3. 标准错误（standard error）

### 1.5.3 不带缓冲的I/O

函数open、read、write、lseek以及close提供了不带缓冲的I/O。这些函数都使用文件描述符。

### 1.5.4 标准I/O

> * 标准I/O函数为那些不带缓冲的I/O函数提供了一个带缓冲的接口。
>
> * 使用标准I/O函数无需担心如何选取最佳的缓冲区大小